<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SkyMart</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />
  </head>
  <body style="background-color: brown">
    <!--navbar-->
    <nav
      class="navbar mb-2 p-2"
      style="
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
        background-color: #f5f5f5;
      "
    >
      <div class="container-fluid">
        <a
          class="navbar-brand"
          href="#"
          style="
            font-size: 45px;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman',
              serif;
            font-weight: bold;
            color: brown;
          "
        >
          <img
            src="e0681d1e-613c-4a6d-ae60-e1fbfa3aec52.jfif"
            alt="Logo"
            width="60"
            height="54"
            class="d-inline-block align-text-top"
          />
          Toko Apalah
        </a>
      </div>
    </nav>

    <!--main menu-->
    <main>
        <div class="container-fluid mb-1">
            <div class="row">
                <div class="col-sm-3">
                    <!--membuat list pesanan-->
                    <div class="p-3 border border-opacity-25 border-0"
                    style="height: 360px; overflow-y: scroll; background-color: #f5f5f5;
                    font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
                    color: brown; font-weight: bold;"
                    id="BoxOrder">
                    list pesanan
                </div>
                <!--membuat pajak dan total bayar-->
                    <div class="shadow rounded-2 p-2 mt-2 mb-2"
                    style="background-color: #f5f5f5; color: brown; 
                    font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;"
                    id="ringkasan">
                        <div></div>
                        <div class="d-flex justify-content-between p-2">
                            <p class="mb-0 fw-semibold">pajak</p>
                            <p class="mb-0" id="tax">Rp.0</p>
                        </div>
                        <div class="d-flex justify-content-between p-2 rounded-2"
                         style="background-color: brown;">
                         <p class="mb-0 fw-semibold" style="color: white;">Total Harga:</p>
                         <p class="mb-0" id="TotalAmount" style="color: white;">Rp. 0</p>
                    </div>
                </div>
            </div>
        <div class="col-sm-9">
            <div class="d-flex justify-content-between align-item-center p-3"
            style="width: 100%; height: 80px;">
            <p class="mb-0 fw-semibold" style="font-size: 20px;
            font-family: Georgia, 'Times New Roman', Times, serif;
            color: white;">List menu</p>
            <div class="w-auto d-flex justify-content-center align-item-center">
            <input type="text" id="searchInput" placeholder="Search Items.."
            style="width: 300px; height: 40px; padding: 5px; margin: 3px; border-radius: 10px;
            border-color: brown;"/>
            <button style="background-color: transparent; border: none;"
            id="sortBy" onclick="sortItems()">
            <img src="upDown.svg"
            style="width: 30px; height: 30px;">
            </button>
        </div>
            </div>
                <div class="p-4 me-1 border border-black border-0 shadow"
                style="max-height: 450px; overflow-y: scroll; background-color: #f5f5f5; 
                border-radius: 20px;" id="boxItem">
                    <div class="row" id="kolomItem">
                        <!--PRODUCT ITEMS-->
                        <div class="col-lg-2 col-md-3 col-sm-6 p-0" style="margin: 10px;"
                            id="product">
                            <button onclick="tambahpesanan('pancakeBesar',1,30000)" class="item
                            card-body p-3 border-0 shadow rounded-3" type="button"
                            style="background-color: #f5f5f5;" id="item">
                            <img class="card-img mb-1 rounded-2" src="cupcake.jfif" alt="">
                            <h5 class="card-title-product-name" style="font-size: small;
                            text-align: start;" id="product-name">Pancake Besar 30.000</h5>
                        </button>
                            </div> 
                                <div class="col-lg-2 col-md-3 col-sm-6 p-0" style="margin: 10px;"
                                id="product">
                                <button onclick="tambahpesanan('pancake',1,25000)" class="item
                                card-body p-3 border-0 shadow rounded-3" type="button"
                                style="background-color: #f5f5f5;" id="item">
                                <img class="card-img mb-1 rounded-2" src="cupcake.jfif" alt="">
                                <h5 class="card-title-product-name" style="font-size: small;
                                text-align: start;" id="product-name">Pancake 25.000</h5>
                            </button>
                            </div> 
                                <div class="col-lg-2 col-md-3 col-sm-6 p-0" style="margin: 10px;"
                            id="product">
                            <button onclick="tambahpesanan('Boba',1,25000)" class="item
                            card-body p-3 border-0 shadow rounded-3" type="button"
                            style="background-color: #f5f5f5;" id="item">
                            <img class="card-img mb-1 rounded-2" src="cupcake.jfif" alt="">
                            <h5 class="card-title-product-name" style="font-size: small;
                            text-align: start;" id="product-name">Minum bOBA 25.000</h5>
                        </button>
                        </div>  
                        <div class="col-lg-2 col-md-3 col-sm-6 p-0" style="margin: 10px;"
                            id="product">
                            <button onclick="tambahpesanan('KuePie',1,25000)" class="item
                            card-body p-3 border-0 shadow rounded-3" type="button"
                            style="background-color: #f5f5f5;" id="item">
                            <img class="card-img mb-1 rounded-2" src="cupcake.jfif" alt="">
                            <h5 class="card-title-product-name" style="font-size: small;
                            text-align: start;" id="product-name">Kue Pie 25.000</h5>
                        </button>
                    </div>
                    <div class="col-lg-2 col-md-3 col-sm-6 p-0" style="margin: 10px;"
                            id="product">
                            <button onclick="tambahpesanan('Coklat',1,25000)" class="item
                            card-body p-3 border-0 shadow rounded-3" type="button"
                            style="background-color: #f5f5f5;" id="item">
                            <img class="card-img mb-1 rounded-2" src="cupcake.jfif" alt="">
                            <h5 class="card-title-product-name" style="font-size: small;
                            text-align: start;" id="product-name">Kue Isi Coklat 25.000</h5>
                        </button>
                </div>
                <div class="col-lg-2 col-md-3 col-sm-6 p-0" style="margin: 10px;"
                            id="product">
                            <button onclick="tambahpesanan('KueKotak',1,25000)" class="item
                            card-body p-3 border-0 shadow rounded-3" type="button"
                            style="background-color: #f5f5f5;" id="item">
                            <img class="card-img mb-1 rounded-2" src="cupcake.jfif" alt="">
                            <h5 class="card-title-product-name" style="font-size: small;
                            text-align: start;" id="product-name">Kue Kotak 25.000</h5>
                        </button>
            </div>
        </div>
    </main>
    <!--footer-->
    <footer class="container-fluid" style="background-color: #f5f5f5;">
        <div class="col-12" style="color: brown; font-weight: bold;">
            &copy; Cihuyyyyy
        </div>
    </footer>
  </body>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
    <script>
    var cart = [];

    function tambahpesanan(name, count, price) {
        var existingItem = cart.find(element => element.name === name);
        if (!existingItem) {
            cart.push({ name, count, price });
        } else {
            existingItem.count++;
        }
        showCartList();
    }

    function Hapus(index) {
        if(confirm(cart.splice(index, 1) && "apakah Anda Yakin Mau Menghapus Pesanan ini?"));
        showCartList();
    }

    function showCartList() {
        $('#BoxOrder').empty();
        var totalBelanja = 0;
        cart.forEach(item => {
            var subtotal = item.count * item.price;
            totalBelanja += subtotal;
            $('#BoxOrder').append(`q
                <div class="row me-0 p-1 mb-2 scroll border-0 shadow rounded-2" style="background-color: #f5f5f5; overflow-x: auto;" id="order">
                    <div class="col-10">
                        <div class="d-flex justify-content-between">
                            <p class="mb-0 fw-semibold" style="font-size: 15px;">${item.name}</p>
                            <p class="mb-0 fw-bold" style="font-size: 12px;">${subtotal}</p>
                        </div>
                        <div class="d-flex mb-0 justify-content-between" style="font-size: x-small;">
                            <div class="d-flex justify-content-between align-items-center">
                                <p class="mb-0">Unit price: </p>
                                <p class="mb-0 fw-bold">${item.price}</p>
                            </div>
                            <div class="d-flex justify-content-between align-items-center">
                                <p class="mb-0">Unit count</p>
                                <p class="mb-0">${item.count}</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-2 position-relative align-items-center">
                        <i class="bx bx-trash" style="cursor: pointer; font-size: 30px; text-align: center;" onclick="Hapus(${cart.indexOf(item)})"></i>
                    </div>
                </div>
            `);
        });
    };

    //Pajak

    console.log(cart);

var belanja = 0;
var pajakPersentase = 0.1;
var totalpajak = 0;
var diskon = 10;
for(var i = 0; i < cart.length; i++){
    belanja += cart[i].count * cart[i].price;
}

var jumlahDiskon = (belanja * diskon) / 100;
var belanjaSetelahDiskon = belanja - jumlahDiskon;

var pajak = belanja * pajakPersentase;
var pajakSetelahDiskon = belanjaSetelahDiskon * pajakPersentase;

totalpajak = pajak - pajakSetelahDiskon;

var total = belanjaSetelahDiskon + pajakSetelahDiskon;

$("#tax").text("Rp. " + pajakSetelahDiskon);
$("#TotalAmount").text("Rp. " + total); 

        //mencari Menu
        $("#SearchInput").on("input", function() {
        var searchTerm = $(this).val().toLowerCase();
        var found = false;

        $("#ItemProduct .col-lg-2").each(function() {
            var itemName = $(this).find(".product-name").text().toLowerCase();
            if (itemName.includes(searchTerm)) {
                $(this).show();
                found = true;
            } else {
                $(this).hide();
            }
     });

         if (!found) {
            if ($("#noProductMessage").length === 0) {
               $("#ItemProduct").append(`
                <div id="noProductMessage" style="background-color: rgb(236, 218, 218);">
                    <p>produk tidak ada</p>
                </div>
            `);
           } else {
                $("#noProductMessage").show();
            }
        } else {
            $("#noProductMessage").hide();
        }
        $("#BoxItem").scrollTop(0);
});
    </script>
</html>